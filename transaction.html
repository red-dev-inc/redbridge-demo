<!-- Transaction Page Content -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>red·bridge Demo</title>

    <!-- Favicon for the webpage -->
    <link rel="icon" type="image/x-icon" href="/img/zavax-icon.png" />

    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="./css/index.css" />

    <!-- Importing JavaScript modules -->
    <script>
      (function () {
        const savedTheme = localStorage.getItem("theme") || "red";
        document.documentElement.setAttribute("data-theme", savedTheme);
      })();
    </script>
    <script type="module" src="./js/main.js"></script>
    <script type="module" src="./js/select.js"></script>
    <script type="module" src="./js/transactionInput.js"></script>
  </head>
  <body>
    <!-- Right background SVG -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 2153.631 2153.631"
      style="
        position: fixed;
        top: -10%;
        left: -33%;
        width: 100%;
        height: 200vh;
        z-index: -1;
      "
    >
      <defs>
        <!-- Defining linear gradient for background fill -->
        <linearGradient
          id="linear-gradient"
          x1="0.402"
          y1="0.756"
          x2="0.42"
          y2="-0.124"
          gradientUnits="objectBoundingBox"
        >
          <stop id="gradientLeftStop1" offset="0" stop-color="#ef1a1a" />
          <stop id="gradientLeftStop2" offset="1" stop-color="#780d0d" stop-opacity="0.741" />
        </linearGradient>
      </defs>
      <path
        id="Path_38"
        data-name="Path 38"
        d="M1986.814,15036.575s235.74-203.607,621.486-145.014,759.595,407.418,1201.542,138.108-586.96,1201.54-897.7,932.229-825.2-825.2-825.2-825.2Z"
        transform="translate(9905.279 -11927.324) rotate(45)"
        opacity="0.15"
        fill="url(#linear-gradient)"
      />
    </svg>

    <!-- Bottom background SVG -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 2036.966 873.669"
      style="
        position: fixed;
        top: 30%;
        left: -23%;
        width: 150%;
        height: 100vh;
        z-index: -1;
        transform: rotate(0deg);
      "
    >
      <defs>
        <linearGradient
          id="linear-gradient-overlay"
          x1="0.477"
          y1="0.755"
          x2="0.449"
          y2="0.244"
          gradientUnits="objectBoundingBox"
        >
          <stop id="gradientBottomStop1" offset="0" stop-color="#ef1a1a" />
          <stop id="gradientBottomStop2" offset="1" stop-color="#780d0d" />
        </linearGradient>
      </defs>
      <path
        id="Path_32_overlay"
        data-name="Path 32"
        d="M1984,14981.363s332.891-304.674,718.637-236.969,918.683,300.166,1195.361-169.262,0,767.322,0,767.322H1984Z"
        transform="translate(-1984 -14468.786)"
        opacity="0.16"
        fill="url(#linear-gradient-overlay)"
      />
    </svg>

    <!-- Application header icon -->
    <img src="./img/zavax-icon.png" class="header-icon ds-icon" id="dsIcon" />

    <div class="main-container">
      <!-- Help icon button -->
      <div class="help-icons-group">
        <img
            src="./img/help_icon.svg"
            class="help-icon mb-circle-icon"
            id="mbHelpButton"
          />
          <div id="mbSwitchMode" class="mode-switch mb-switch"></div>
      </div>

      <!-- Title section -->
      <div class="title-container">
        <span class="label-title-transaction">Confirm Transaction</span>
        <div class="help-icons-group">
          <div class="tooltip">
            <div id="dsSwitchMode" class="mode-switch ds-switch"></div>
            <span id="dsThemeInfo" class="tooltiptext">Dark Mode</span>
          </div>
          
          <div class="tooltip">
            <img
              src="./img/help_icon.svg"
              class="help-icon ds-circle-icon"
              id="dsHelpButton"
            />
            <div id="helpInfo" class="tooltiptext">Help</div>
          </div>
        </div>
        <img
          src="./img/zavax-icon.png"
          class="header-icon mb-icon"
          id="mbIcon"
        />
      </div>

      <!-- Transaction details card -->
      <div class="transaction-bridge-card mb-4">
        <div class="transaction-item">
          <span class="transaction-label">Sending:</span>
          <span id="sendingAmount"></span>
        </div>

        <!-- Network selection -->
        <div class="network-info">
          <div class="network">
            <span>From</span>
            <div id="fromNetwork" class="network-group">
              <img src="./img/zcash.svg" id="fromNetworkIcon" class="icon-coin-md" />
              <span>Zcash Network</span>
            </div>
          </div>
          <div class="network">
            <span>To</span>
            <div id="toNetwork" class="network-group">
              <img src="./img/avax.svg" id="toNetworkIcon" class="icon-coin-md" />
              <span>Avalanche Network</span>
            </div>
          </div>
        </div>

        <!-- Agent selection dropdown -->
        <div class="transaction-item">
          <span>Agent</span>
          <div class="custom-select">
            <div class="custom-select-trigger">
              <span>Any Available Agent</span>
              <img src="./img/chevron-down.svg" class="dropdown-arrow" />
            </div>
            <div class="custom-options" id="nodeOptions">
              <div class="custom-option">Any Available Agent</div>
              <div class="custom-option">redbridgeFoundationNode1.avax</div>
              <div class="custom-option">ShieldedLabsNode1.zec</div>
              <div class="custom-option">Zec.rocks</div>
            </div>
          </div>
        </div>

        <!-- Transaction fees and receiving amount -->
        <div class="transaction-item">
          <span class="transaction-label">Bridging Fee:</span>
          <span>0.0100 ZEC</span>
        </div>
        <div class="receiving-bg">
          <span class="transaction-label">Receiving:</span>
          <span class="transaction-label" id="receivingAmount"
            >0.9900 ZEC.rbr</span
          >
        </div>
      </div>

      <!-- Action buttons -->
      <div class="button-container">
        <button type="button" class="btn-cancel btn-lg" id="cancelButton">
          Cancel
        </button>
        <button
          type="button"
          class="btn-bridge btn-lg"
          id="progressPopupButton"
        >
          Bridge Now
        </button>
      </div>
    </div>

    <!-- Popup overlay for transaction progress -->
    <div class="popup-overlay" id="popupOverlay">
      <div class="popup-content">
        <img
          id="logo_loading"
          class="logo_loading"
          src="./img/zavax-icon.png"
        />

        <div class="popup-progress">
          <div class="popup-progress-text" id="progressText">10%</div>

          <!-- Progress bar container -->
          <div class="popup-progress-bar">
            <div class="popup-progress-bar-fill" id="progressBarFill"></div>
          </div>

          <!-- Description of the bridging process -->
          <div class="popup-description" id="popupDescription">
            You will be asked to approve the bridge transaction using MetaMask
            or Core, and then bridging will begin.
          </div>
        </div>

        <!-- Close button for the popup -->
        <div class="popup-close" id="progressPopupCloseButton">
          <img id="cancelIcon" src="./img/cancel_icon.svg" class="popup-close-icon" />
        </div>
      </div>
    </div>

    <!-- Help popup overlay -->
    <div class="popup-overlay" id="helpPopupOverlay">
      <div class="popup-content-small">
        <!-- Help message with information about red·bridge -->
        <div class="popup-message">
          In the production version, detailed help on using red·bridge, such as
          topics on how to load your Zcash wallet and connect it, will appear
          here.
        </div>
        <!-- Close button for the help popup -->
        <button class="popup-button" id="helpPopupCloseButton">OK</button>
      </div>
    </div>
  </body>
</html>
